(self.webpackChunkreview=self.webpackChunkreview||[]).push([[593,974],{1974:(g,u,i)=>{i.r(u),i.d(u,{AuthService:()=>o,ProfileStateService:()=>c,SharedLibComponent:()=>d,authGuard:()=>f,authGuardRedirect:()=>h});var n=i(2950),l=i(7584);let c=(()=>{class e{name=(0,n.signal)("");email=(0,n.signal)("");static \u0275fac=function(t){return new(t||e)};static \u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),d=(()=>{class e{profile=(0,n.inject)(c);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["bs-profile-name"]],decls:2,vars:1,template:function(t,s){1&t&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate1(" ",s.profile.name()," "))},encapsulation:2})}return e})();const a="shared-lib-auth";let o=(()=>{class e{_user=(0,n.signal)(null);_authenticated=(0,n.computed)(()=>!!this._user()?.token);token(){return this._user()?.token}user(){return this._user()}authenticated(){return this._authenticated()}signIn(r){try{const t=localStorage.getItem(a);if(!t)return!1;const s=JSON.parse(t);return s?.email===r&&(this._user.set({name:s.name,email:s.email,token:crypto.randomUUID()}),localStorage.setItem(a,JSON.stringify(this._user())),this._user())}catch{return!1}}signInSilent(){try{const r=localStorage.getItem(a);if(!r)return!1;const t=JSON.parse(r);return!!t?.token&&(this._user.set({name:t.name,email:t.email,token:crypto.randomUUID()}),localStorage.setItem(a,JSON.stringify(this._user())),this._user())}catch{return!1}}signUp(r,t){localStorage.setItem(a,JSON.stringify({name:r,email:t}))}signOut(){localStorage.setItem(a,JSON.stringify({...this._user(),token:null})),this._user.set(null)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const f=(e,m)=>!!(0,n.inject)(o).authenticated(),h=e=>(m,r)=>!(r.url!==e&&!(0,n.inject)(o).authenticated()&&((0,n.inject)(l.Router).navigate([e]),1))}}]);